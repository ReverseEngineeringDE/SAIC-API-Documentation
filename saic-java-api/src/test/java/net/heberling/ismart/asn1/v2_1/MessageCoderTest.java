package net.heberling.ismart.asn1.v2_1;

import net.heberling.ismart.asn1.AbstractMessageCoderTest;
import net.heberling.ismart.asn1.v2_1.entity.MP_SecurityAlarmResp;
import net.heberling.ismart.asn1.v2_1.entity.OTA_RVMVehicleStatusReq;
import net.heberling.ismart.asn1.v2_1.entity.OTA_RVMVehicleStatusResp25857;
import org.bn.coders.IASN1PreparedElement;
import org.junit.jupiter.api.Test;

class MessageCoderTest extends AbstractMessageCoderTest {

    @Test
    void decodeEncodeRequest_5BD() {
        // https://tap-eu.soimt.com/TAP.Web/ota.mpv21

        decodeEncode(
                "1008621730000000000000000000000000000000000F0F2C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C586B0A258B162C58B162C58B162C58B162C5801C67CBA14000000000000650140",
                new MessageCoder<>(IASN1PreparedElement.class));
    }

    @Test
    void decodeEncodeResponse_5BD() {

        decodeEncode(
                "1008821750000000000000000000000000000000000F0FAC58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C586B0A258B162C58B162C58B162C58B162C5802C67CBA140000000000006501400000",
                new MessageCoder<>(MP_SecurityAlarmResp.class));
    }

    @Test
    void decodeEncodeRequest_511() {
        // https://tap-eu.soimt.com/TAP.Web/ota.mpv21

        decodeEncode(
                "1008721730000000000000000000000000000000000F0F2C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C586AC58D8B162C58B162C58B162C58B162C5801C67CBA2200000000000465014002",
                new MessageCoder<>(OTA_RVMVehicleStatusReq.class));
    }

    @Test
    void decodeEncodeResponse_511_Failed() {
        // failed!

        decodeEncode(
                "100C721B40000000000000000000000000000000000F0FEC58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C586AC58D8B162C58B162C58B162C58B162C5802C67CBA29F34144FC00006501400103D5468652072656D6F746520636F6E74726F6C20696E737472756374696F6E206661696C65642C20706C656173652074727920616761696E206C617465722E0",
                new MessageCoder<>(OTA_RVMVehicleStatusResp25857.class),
                "failed");
    }

    @Test
    void decodeEncodeResponse_511() {

        decodeEncode(
                "1014F21750000000000000000000000000000000000F0FAC58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C58B162C586AC58D8B162C58B162C58B162C58B162C5802C67CBA31F34144FC031C6501400000E33E5D1786A8A8059BDA2003B2001F4012AC67CBA2B7FF38101A999999000020000270F003C0000024200000012FC01C67CBA2C0000012DE001F80012FC00000001500000000400100020003000400050006000700080009000A000B000C000D000E000F0010001100120013001400150016001700180019001A001B001C001D001E001F0020002100220023002400250026002700280029002A002B002C002D002E002F0030003100320033003400350036003700380039003A003B003C003D003E003F004000",
                new MessageCoder<>(OTA_RVMVehicleStatusResp25857.class));
    }
}
